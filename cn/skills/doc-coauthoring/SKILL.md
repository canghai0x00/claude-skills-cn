---
name: doc-coauthoring
description: 指导用户完成文档协作创作的结构化工作流程。在用户希望撰写文档、提案、技术规范、决策文档或类似结构化内容时使用。此工作流程帮助用户高效传递上下文，通过迭代完善内容，并验证文档对读者是否有效。当用户提到撰写文档、创建提案、起草规范或类似文档任务时触发。
---

# 文档协作创作工作流程

此技能提供一个结构化工作流程，引导用户进行协作文档创建。作为积极的指导者，引导用户完成三个阶段：上下文收集、完善与结构、读者测试。

## 何时提供此工作流程

**触发条件：**

- 用户提到撰写文档："写一份文档"、"起草一份提案"、"创建一份规范"、"写一份报告"
- 用户提到特定文档类型："PRD"、"设计文档"、"决策文档"、"RFC"
- 用户似乎正在开始一项实质性的写作任务

**初始提议：**
向用户提供一个协作创作文档的结构化工作流程。解释三个阶段：

1. **上下文收集**：用户提供所有相关上下文，同时 Claude 提出澄清性问题
2. **完善与结构**：通过头脑风暴和编辑，逐步构建每个部分
3. **读者测试**：在他人阅读之前，用一个全新的 Claude（无上下文）测试文档，发现盲点

解释这种方法可以确保文档在他人阅读时（包括当他们将文档粘贴到 Claude 中时）效果良好。询问他们是否想尝试这种工作流程或更喜欢自由形式的工作方式。

如果用户拒绝，采用自由形式工作。如果用户接受，进入第 1 阶段。

## 第 1 阶段：上下文收集

**目标：** 缩小用户所知和 Claude 所知之间的差距，为后期智能指导奠定基础。

### 初始问题

首先询问用户关于文档的元上下文：

1. 这是什么类型的文档？（例如，技术规范、决策文档、提案）
2. 主要受众是谁？
3. 有人阅读此文档时，期望产生什么影响？
4. 是否有需要遵循的模板或特定格式？
5. 还有任何其他约束或需要了解的上下文吗？

告知他们可以用简短形式回答或以任何对他们最有效的方式提供信息。

**如果用户提供模板或提及文档类型：**

- 询问他们是否有要分享的模板文档
- 如果他们提供共享文档的链接，使用适当的集成获取它
- 如果他们提供文件，阅读它

**如果用户提到编辑现有共享文档：**

- 使用适当的集成读取当前状态
- 检查没有替代文本的图片
- 如果存在没有替代文本的图片，解释当他人使用 Claude 理解文档时，Claude 将无法看到这些图片。询问他们是否希望生成替代文本。如果是，请求他们将每张图片粘贴到聊天中以生成描述性替代文本。

### 信息倾倒

一旦初始问题得到回答，鼓励用户倾倒所有他们拥有的上下文。请求如下信息：

- 项目/问题背景
- 相关团队讨论或共享文档
- 为什么不使用替代解决方案
- 组织上下文（团队动态、过去事件、政治因素）
- 时间压力或限制
- 技术架构或依赖关系
- 利益相关者关注点

建议他们不必担心组织 - 只需全部倾倒出来。提供多种提供上下文的方式：

- 自由流式信息倾倒
- 指向要阅读的团队频道或线程
- 链接到共享文档

**如果有集成可用**（例如，Slack、Teams、Google Drive、SharePoint 或其他 MCP 服务器），提及可以直接使用这些工具拉取上下文。

**如果未检测到集成且在 Claude.ai 或 Claude 应用中：** 建议他们可以在 Claude 设置中启用连接器，以允许直接从消息应用和文档存储中拉取上下文。

告知他们一旦完成初始倾倒后将提出澄清性问题。

**在上下文收集过程中：**

- 如果用户提到团队频道或共享文档：

  - 如果有集成可用：通知他们将立即阅读内容，然后使用适当的集成
  - 如果集成不可用：解释缺乏访问权限。建议他们在 Claude 设置中启用连接器，或直接粘贴相关内容。

- 如果用户提到未知实体/项目：

  - 询问是否应搜索已连接的工具以了解更多信息
  - 等待用户确认后再搜索

- 当用户提供上下文时，跟踪正在学习的内容和仍然不清楚的内容

**提出澄清问题：**

当用户表示已完成初始倾倒（或提供了大量上下文后），提出澄清问题以确保理解：

基于上下文中的差距生成 5-10 个编号问题。

告知他们可以使用简短形式回答（例如，"1：是的，2：参见#频道，3：不，因为向后兼容性"），链接到更多文档，指向要阅读的频道，或继续信息倾倒。无论哪种方式对他们最有效。

**退出条件：**
当问题表现出理解 - 当可以询问边缘情况和权衡取舍而不需要解释基本知识时，表示已收集到足够的上下文。

**转换：**
询问他们是否还有更多上下文要在此阶段提供，或是否可以继续起草文档。

如果用户想添加更多，让他们继续。准备好后，进入第 2 阶段。

## 第 2 阶段：完善与结构

**目标：** 通过头脑风暴、筛选和迭代完善，逐节构建文档。

**给用户的指导：**
解释文档将逐节构建。对于每个部分：

1. 将提出关于需要包含内容的澄清问题
2. 将头脑风暴 5-20 个选项
3. 用户将指示保留/删除/合并什么
4. 将起草该部分
5. 通过精确编辑进行完善

从未知最多的部分开始（通常是核心决策/提案），然后处理其余部分。

**部分排序：**

如果文档结构明确：
询问他们想从哪个部分开始。

建议从未知最多的部分开始。对于决策文档，通常是核心提案。对于规范文档，通常是技术方法。摘要部分最好留到最后。

如果用户不知道他们需要哪些部分：
根据文档类型和模板，建议 3-5 个适合该文档类型的部分。

询问这种结构是否可行，或者他们是否想调整它。

**一旦结构达成一致：**

创建带有所有部分占位文本的初始文档结构。

**如果可以访问工件：**
使用`create_file`创建工件。这为 Claude 和用户提供了一个工作骨架。

告知他们将创建包含所有部分占位符的初始结构。

创建包含所有部分标题和简短占位文本（如"[待撰写]"或"[此处为内容]"）的工件。

提供骨架链接并指出现在可以填充每个部分。

**如果无法访问工件：**
在工作目录中创建一个 markdown 文件。适当命名（例如，`decision-doc.md`、`technical-spec.md`）。

告知他们将创建包含所有部分占位符的初始结构。

创建包含所有部分标题和占位文本的文件。

确认文件名已创建，并指出现在可以填充每个部分。

**对每个部分：**

### 步骤 1：澄清问题

宣布将开始处理[部分名称]部分。询问 5-10 个关于应包含内容的澄清问题：

根据上下文和部分目的生成 5-10 个具体问题。

告知他们可以用简短形式回答或仅指出重要内容。

### 步骤 2：头脑风暴

对于[部分名称]部分，根据部分复杂性头脑风暴[5-20]个可能包括的内容。寻找：

- 可能被遗忘的已分享上下文
- 尚未提及的角度或考虑因素

根据部分复杂性生成 5-20 个编号选项。最后，如果他们想要更多选项，提议继续头脑风暴。

### 步骤 3：筛选

询问应保留、删除或合并哪些要点。请求简短理由以帮助了解下一部分的优先级。

提供示例：

- "保留 1,4,7,9"
- "删除 3（与 1 重复）"
- "删除 6（受众已知道这一点）"
- "合并 11 和 12"

**如果用户给出自由形式反馈**（例如，"看起来不错"或"我大部分都喜欢，但..."）而不是编号选择，提取他们的偏好并继续。解析他们想保留/删除/更改的内容并应用。

### 步骤 4：差距检查

根据他们已选择的内容，询问[部分名称]部分是否还有任何重要的缺失内容。

### 步骤 5：起草

使用`str_replace`将此部分的占位文本替换为实际起草的内容。

宣布将根据他们选择的内容起草[部分名称]部分。

**如果使用工件：**
起草后，提供工件链接。

请他们阅读并指示需要更改的地方。注明具体指示有助于为下一部分学习。

**如果使用文件（无工件）：**
起草后，确认完成。

通知他们[部分名称]部分已在[文件名]中起草。请他们阅读并指示需要更改的地方。注明具体指示有助于为下一部分学习。

**给用户的关键指导（在起草第一部分时包含）：**
提供注释：请他们指示需要更改的地方，而不是直接编辑文档。这有助于学习他们的风格，用于未来部分。例如："删除 X 要点 - 已被 Y 涵盖"或"使第三段更简洁"。

### 步骤 6：迭代完善

当用户提供反馈时：

- 使用`str_replace`进行编辑（从不重新打印整个文档）
- **如果使用工件：** 每次编辑后提供工件链接
- **如果使用文件：** 只确认编辑已完成
- 如果用户直接编辑文档并请求阅读：记下他们所做的更改，并在未来部分中考虑这些（这显示了他们的偏好）

**继续迭代**，直到用户对该部分满意。

### 质量检查

连续 3 次迭代无实质性变化后，询问是否可以在不失去重要信息的情况下删除任何内容。

完成部分后，确认[部分名称]已完成。询问是否准备好移至下一部分。

**对所有部分重复此过程。**

### 接近完成

当接近完成（80%+部分完成）时，宣布打算重新阅读整个文档并检查：

- 各部分之间的流畅性和一致性
- 冗余或矛盾
- 任何感觉"草率"或通用填充的内容
- 每个句子是否都有分量

阅读整个文档并提供反馈。

**当所有部分都已起草并完善：**
宣布所有部分已起草。表示打算再次审查完整文档。

检查整体连贯性、流畅性、完整性。

提供任何最终建议。

询问是否准备进入读者测试，或者他们是否想进一步完善任何内容。

## 第 3 阶段：读者测试

**目标：** 使用一个全新的 Claude（无上下文泄露）测试文档，验证它对读者是否有效。

**给用户的指导：**
解释现在将进行测试，看文档对读者是否真正有效。这可以发现盲点 - 对作者有意义但可能使他人困惑的内容。

### 测试方法

**如果可访问子代理（例如，在 Claude Code 中）：**

无需用户参与直接执行测试。

### 步骤 1：预测读者问题

宣布打算预测读者在尝试发现此文档时可能会问的问题。

生成 5-10 个读者可能会真实提出的问题。

### 步骤 2：用子代理测试

宣布将用一个全新的 Claude 实例（无本对话上下文）测试这些问题。

对每个问题，调用一个子代理，只提供文档内容和问题。

总结读者 Claude 对每个问题的正确/错误之处。

### 步骤 3：运行额外检查

宣布将进行额外检查。

调用子代理检查模糊性、错误假设、矛盾。

总结发现的任何问题。

### 步骤 4：报告和修复

如果发现问题：
报告读者 Claude 在特定问题上遇到困难。

列出具体问题。

表示打算修复这些差距。

对有问题的部分返回完善阶段。

---

**如果无法访问子代理（例如，claude.ai 网页界面）：**

用户需要手动进行测试。

### 步骤 1：预测读者问题

询问人们在尝试发现此文档时可能会问什么问题。他们会在 Claude.ai 中输入什么？

生成 5-10 个读者可能会真实提出的问题。

### 步骤 2：设置测试

提供测试指导：

1. 打开一个全新的 Claude 对话：https://claude.ai
2. 粘贴或共享文档内容（如果使用启用了连接器的共享文档平台，提供链接）
3. 向读者 Claude 提出生成的问题

对每个问题，指导读者 Claude 提供：

- 答案
- 是否有模糊或不清晰的内容
- 文档假设已知的知识/上下文

检查读者 Claude 是否给出正确答案或误解了任何内容。

### 步骤 3：额外检查

还请读者 Claude 回答：

- "本文档中哪些内容可能对读者模糊或不清晰？"
- "本文档假设读者已经具备哪些知识或上下文？"
- "是否存在内部矛盾或不一致？"

### 步骤 4：基于结果迭代

询问读者 Claude 在哪些方面出错或遇到困难。表示打算修复这些差距。

对任何有问题的部分返回完善阶段。

---

### 退出条件（两种方法）

当读者 Claude 能够持续正确回答问题且不发现新的差距或模糊性时，文档就准备好了。

## 最终审查

当读者测试通过时：
宣布文档已通过读者 Claude 测试。在完成前：

1. 建议他们自己进行最后阅读 - 他们拥有此文档并对其质量负责
2. 建议仔细检查任何事实、链接或技术细节
3. 请他们验证文档是否达到了预期的影响

询问他们是否需要再次审查，或者工作是否已完成。

**如果用户想要最终审查，提供它。否则：**
宣布文档完成。提供一些最终提示：

- 考虑在附录中链接此对话，以便读者了解文档是如何开发的
- 使用附录提供深度而不使主文档臃肿
- 根据实际读者的反馈更新文档

## 有效指导的提示

**语气：**

- 直接且程序化
- 在影响用户行为时简要解释理由
- 不要试图"推销"方法 - 只需执行

**处理偏差：**

- 如果用户想跳过某个阶段：询问他们是否想跳过并自由撰写
- 如果用户似乎感到沮丧：承认这比预期花费更多时间。建议加快速度的方法
- 始终给予用户调整流程的能力

**上下文管理：**

- 整个过程中，如果缺少提到内容的上下文，主动询问
- 不要让差距积累 - 出现时立即解决

**工件管理：**

- 使用`create_file`起草完整部分
- 对所有编辑使用`str_replace`
- 每次更改后提供工件链接
- 永远不要使用工件进行头脑风暴列表 - 那只是对话

**质量优于速度：**

- 不要匆忙完成各阶段
- 每次迭代都应有意义的改进
- 目标是创建对读者真正有效的文档
